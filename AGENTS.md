# AGENTS.md - Instructions for AI Agents

Welcome, AI Agent! This file provides guidance for working with the `ts-wc-templates` repository.

## 1. Project Overview

This is a template repository for building modern web applications using Web Components with TypeScript and Vite. It features a client-side router and is set up for easy deployment to GitHub Pages.

## 2. Key Technologies

*   **TypeScript:** For static typing and modern JavaScript features.
*   **Vite:** For fast development and optimized builds.
*   **Web Components:** For creating reusable custom elements.
*   **Client-Side Routing:** Custom router implemented in `src/core/router/router.ts`.
*   **CSS Variables:** For themeable and maintainable styles.
*   **ESLint & Prettier:** For code linting and formatting (configurations are in `eslint.config.js` and `.prettierrc.cjs`).

## 3. Directory Structure

*   `src/`: Contains all source code.
    *   `src/components/`: Houses individual web components, typically one directory per component (e.g., `home-page/`, `nav-page/`).
    *   `src/core/`: Core application logic.
        *   `src/core/base-component.ts`: A base class that components can extend.
        *   `src/core/router/`: Client-side routing implementation.
    *   `src/main.ts`: The main entry point of the application, initializes the router and registers routes.
    *   `src/styles/`: Global styles and CSS variables.
*   `dist/`: The build output directory (generated by `npm run build`). This directory is deployed to GitHub Pages.
*   `.github/workflows/`: Contains GitHub Actions workflows, including `deploy.yml` for GitHub Pages deployment.
*   `index.html`: The main HTML entry point for the application (source file).
*   `vite.config.ts`: Vite build and development server configuration.

## 4. Development Workflow

*   **Install Dependencies:** `npm ci`
*   **Run Development Server:** `npm run dev` (typically available at `http://localhost:3000`)
*   **Build for Production:** `npm run build` (output goes to `dist/`)
*   **Run Tests:** `npm test` (uses Vitest)

## 5. Deployment (GitHub Pages)

This project is configured for deployment to GitHub Pages under a repository-named subdirectory (e.g., `https://<username>.github.io/ts-wc-templates/`).

*   **Base Path:** The `vite.config.ts` file sets `base: '/ts-wc-templates/'` during production builds (`command === 'build'`). This ensures that `import.meta.env.BASE_URL` is correctly set to `/ts-wc-templates/`, and all asset paths in the built `index.html` are prefixed accordingly.
*   **SPA Routing (404.html Strategy):** To support deep linking in the SPA on GitHub Pages, the `.github/workflows/deploy.yml` workflow includes a step: `cp dist/index.html dist/404.html`. This means GitHub Pages will serve the application's main `index.html` file for any path it doesn't directly recognize, allowing the client-side router to handle the specific route.

## 6. Routing

*   Client-side routing is handled by the `Router` class in `src/core/router/router.ts`.
*   Routes are defined and registered in `src/main.ts` using `Router.getInstance().registerRoute({...});`.
*   The router uses `import.meta.env.BASE_URL` (provided by Vite, see "Deployment" section) to correctly determine the application-specific path from `window.location.pathname`. For example, if `BASE_URL` is `/ts-wc-templates/` and `window.location.pathname` is `/ts-wc-templates/about`, the router will correctly identify the application path as `/about`.

## 7. Component Structure

*   Components are typically located in their own subdirectory within `src/components/`.
*   A component usually consists of:
    *   A `.ts` file for the component logic (e.g., `my-component.ts`).
    *   An `.html` file for the component's template.
    *   A `.css` file for the component's styles.
    *   A `.test.ts` file for unit tests.
*   Many components extend the `BaseComponent` class from `src/core/base-component.ts`, which provides a simple way to attach a shadow DOM and apply HTML/CSS templates.

## 8. Coding Style & Conventions

*   Follow existing code style.
*   Code is formatted using Prettier and linted using ESLint. Ensure changes pass these checks.
*   Use kebab-case for custom element tag names (e.g., `app-root`, `home-page`).

---

Please adhere to these guidelines when making changes to the repository.
